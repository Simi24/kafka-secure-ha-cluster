# Secure and Highly Available Kafka Cluster

This project demonstrates the setup of a secure, highly available Apache Kafka cluster using Docker. It includes a multi-node Zookeeper ensemble, multiple Kafka brokers, and example microservices (producer and consumer) to showcase the functionality.

## Features

- **High Availability**: 3-node Zookeeper ensemble and 3-node Kafka cluster for fault tolerance.
- **Security**: 
  - SSL/TLS encryption for all communications.
  - SASL PLAIN authentication for clients and inter-broker communication.
  - ACL-based authorization.
- **Microservices**: Example producer and consumer applications demonstrating secure interaction with the Kafka cluster.
- **Admin Client**: For cluster management and monitoring.

## Prerequisites

- Docker and Docker Compose
- OpenSSL
- Java Development Kit (JDK)
- Python 3.x

## Setup Instructions

1. **Clone the repository**
   ```
   git clone https://github.com/Simi24/kafka-secure-ha-cluster.git
   cd kafka-secure-ha-cluster
   ```

2. **Customize and generate SSL certificates**
   
   a. Open the `generate_ssl_certs.sh` script in a text editor:
   ```
   nano generate_ssl_certs.sh
   ```
   
   b. Modify the variables at the top of the script according to your needs. Pay special attention to the `PASSWORD` variable, as you'll need to use this value in the next steps.
   
   c. Save your changes and close the editor.
   
   d. Make the script executable and run it:
   ```
   chmod +x generate_ssl_certs.sh
   ./generate_ssl_certs.sh
   ```

3. **Set up environment variables**
   Copy the example .env file and modify it with your desired settings:
   ```
   cp .env.example .env
   ```
   Edit the `.env` file to set your desired passwords and other configurations. Make sure the passwords here match the one you set in the `PASSWORD` variable of the SSL certificate generation script.

## Project Structure

- `docker-compose.yml`: Main configuration file for the Docker setup.
- `generate_ssl_certs.sh`: Script to generate SSL certificates.
- `.env`: Environment variables for sensitive configurations.
- `/producer`: Contains the Kafka producer microservice.
- `/consumer`: Contains the Kafka consumer microservice.
- `/adminclient`: Contains the Kafka admin client.
- `/ssl`: Directory where SSL certificates are stored (generated by the script).

## Security Configuration

This project uses the following security measures:

- SSL/TLS encryption for all network communications.
- SASL PLAIN authentication mechanism.
- ACL (Access Control Lists) for authorization.

The SSL certificates and keys are generated using a custom script. You can easily customize the certificate details and passwords by editing the variables at the top of the `generate_ssl_certs.sh` script before running it.

Ensure that the passwords set in the SSL certificate generation script match those in your `.env` file for the system to work correctly.

Refer to the `docker-compose.yml` file for detailed security configurations.

## Troubleshooting

- If you encounter connection issues, ensure that all containers are healthy and that the SSL certificates were generated correctly.
- Check the logs of individual services:
  ```
  docker-compose logs [service_name]
  ```

---

For any questions or issues, please open an issue in the GitHub repository.
